2018/12/24
A beginning to become a CS master.

GetCurrentProcessId() 

I think it is necessary to Realize an "adminserver" in one 
month.Meanwhile,the architecture of "simuserver" shoul
d be made clear in one week.The speed of downloading
files in "adminserver" must be accelerated.

2018/12/25
learn to create a thread in win.
#include<thread>
thread t1(functionName);
pretty simple.

To accelerate the download speed,I think replace "while"
 with "for" is not helpful.

Just now,I realize that CS master also means a higher 
degree in China.HaHaHa.

Well,I need to understand how to use MUTEX and SEMA
POST,etc.

sprintf_s

服务器向nodeagent发送文件信息，由nodeagent向服务器
请求文件块。但是速度非常缓慢。寻找解决办法。

GenerateComponentFileInfos

#include"io.h"

Record
typedef struct _WIN32_FIND_DATA {
DWORD dwFileAttributes; //文件属性
FILETIME ftCreationTime; // 文件创建时间
FILETIME ftLastAccessTime; // 文件最后一次访问时间
FILETIME ftLastWriteTime; // 文件最后一次修改时间
DWORD nFileSizeHigh; // 文件长度高32位
DWORD nFileSizeLow; // 文件长度低32位
DWORD dwReserved0; // 系统保留
DWORD dwReserved1; // 系统保留
TCHAR cFileName[ MAX_PATH ]; // 长文件名
TCHAR cAlternateFileName[ 14 ]; // 8.3格式文件名
} WIN32_FIND_DATA, *PWIN32_FIND_DATA;

做一个文件下载进度报告。这个初步的想法是统计当前
已经收到的文件块数量，和全部文件块数量进行对比获
得进度。

2018/12/26
今日基础任务：
完成停止组件部署功能。
请教组件下载加速功能应该如何实现。
查找重启AdminServer后组件无法下载的原因。
今日进阶任务：隐藏。

关于停止组件部署功能：
在MsgList中增加了一个清空队列的功能。使得当前的Node
Agent不再向服务器请求文件。

重启AdminServer后组件下载可能原因分析：
对于NodeAgent来说，已经发送了要求的消息。
[DEBUG]服务器输出Get_sessionList:1
[DEBUG] 收到客户端 组件文件下载报文
              组件ID:201
              文件名：msvcp120d.dll
              文件块号：11

replyTopicName为：DEVICE:22063296
重启服务器之后replyTopicName并没有改变

NodeAgent显示Wait for too many round!
(应该是Wait for too many rounds...)，这可能代表
NodeAgent发送了请求但是服务器并没有响应。在
服务器接收组件文件块处加一条语句，判断NodeAg
ent是否接收到了服务器发过来地报文。

奇怪地情况，初步来看AdminServer重启后并没有什么改变
了地地方。

找到原因了，下载器在Stop后再Start并不会继续执行。

InsertMsg之后，fileDownloader没有执行MsgResolve

可以将文件下载改成由服务器主动发送给节点代理，这样
速度会快很多。尽可能今天完成。

关于线程的程序还是有些复杂的，16：03还未查出问题。
目前MsgList暂停时将整个List清空。之后暂停后再启动
就可以将再次下载。

依据这个思路，停止部署也可以将整个线程清空。

主要问题就时加速文件的下载。当前的思路时将文件
下载改成主动型。主动型意味着由服务器向NodeAgent
主动发送文件块。17：30思考如何修改下载部分。

记录一下修改过的文件。主要包括了MsgList的Stop部分。
之后估计还是需要修改，因为当前Stop清空了整个消息队
列。真正的stop需要不影响消息队列的情况下暂停。

服务器主动发送的难点：如何让NodeAgent知道自己请求
的文件块已经被下载完成。
（这个问题实际上不需要考虑)

今天实际上已经完成了设定的三个任务

2018/12/27
基础任务：基于文件块总数的组件下载进度获取接口。
了解仿真代码。（仿真代码居然没有注释)

进阶任务：隐藏
组件文件变更。

仅通过AdminServer程序来计算下载进度。计算组件文
件块发送数量。

需要获取计算机中一个任务总的大小。初步想法是统计
一个任务下所有组件的大小并相加，计算出所需要的总
的文件块的数量。使用静态变量记录AdminServer发送
的文件块的数量，获取下载的进度。

已经可以获取传送的文件块数量，接下去只需要获取总
文件块数量和NodeAgent通知时间即可。

当NodeAgent告知AdminServer下载成功后，总的传输
文件块数量和文件块总数量清零。

1、获取一个任务需要发送的总文件块数量
2、在DeployManager的线程中加一个通知compManager
清零的标记（随便什么吧，现在还没想好)

想到一个可改进的地方，在Item中加一个变量，记录Item
的文件大小。

计算这个其实可以使用已经写好的接口，在Seq中自然记录了
一个组件的大小。

DeployManager中的和ComponentManager中的问题
基本已经完成了。现在在VDUserManager中集成即可。
考虑下载完成的操作。

下载成功之后就将发送文件块数量与总文件块数量清零
文件下载进度存储在Session中。

搞定文件下载进度。
15：19至18：00
对于3.4，目前已经搞定
上传组件文件的接口和删除组件文件的接口都已经存在。
告知组件上传工具维护人员如何使用即可。

2018/12/28
今日基础任务：二叉树前序遍历对应的中序遍历的个数。
仿真部分代码的主要结构及实现。C++基础内容复习。

今日进阶任务：
HashMap、List、Pair、Vector等STL工具的使用

上午9：30
继续推进数据结构的阅读。

12：20
线索二叉树超出预料的麻烦。

下午消耗在了合并代码和无意义的加速组件下载速度上。
李凯又tm犯贱了。

晚20：16，发奋学习，基础差的太多了。发现一个叫
green day的组合歌挺好听的。

2018/12/29
上午简直什么都没干。11：30~15：00请假。
对于两个下载器同时请求文件块时文件块会丢失的情况，
加一个线程用于处理该情况。


2019/1/3
先记录一下昨日工作，获取了修改linux机器网络配置的方法
协助修改两个bug。惭愧，又蹉跎了数日。

今日计划。了结AdminServer的相关文档。了解仿真代码相关
内容。了解软总线代码（或者说是中间件)。
重启英语单词的背诵。数据结构继续向下阅读。
了解注册表相关的内容（软件安装相关)。
背诵linux命令行命令。
Also，减肥。

QT的QPixmap是什么意思。整理一下用户数据通用性。

组件是放在一起的，一个用户删除组件后，其余用户的
相同组件也会被删除。这是我们要解决的一个问题。也许
应当将系统组件分文件夹存放。

除此之外用户似乎没有其它的数据可以存储。可以再想
一想。用户配置信息接口是现成的。

又是没什么收获的一天。。


2019/1/4
今日计划：理解仿真（真正能够上手工作)(优先)
云环境下多用户的数据管理。整理一下多用户的数据管理
究竟应该体现再哪些方面。(优先)
考虑多个程序的合并工作。关于这点，首先需要搞清楚软
总线的工作机制。(次优先)

虚拟桌面环境配置、用户系统组件是互相影响的。
想到啥写啥，周末租个服务器自己做vpn。

关于多用户管理，使用的接口是SimuSceneDesigner中
的PutSimuSceneToServer和GetSimuSceneFromServer
。

可参考的对象是图形库同步。相关文件有EvoSimuGraph
Library、VdesktopGraphLibrary、SimuSceneDesigner
Info。

2019/1/6
还是未进入学习状态。
当前主要考虑仿真场景同步的问题。、

图形库对文件的上传同步分的很细
GetSimuSceneFromServer
PutSimuSceneToServer均未实现。


